{% extends 'kiosco/index.html' %}

{% block titulo %}<title>{{ producto.nombre }} - Detalle</title> {% endblock %}

{% block Bienvenida %} {% endblock %}

{% block content %} 

<div class="container my-5">

    <!-- Botón Volver (Breadcrumb simple) -->
    <div class="mb-4">
        <a href="{% url 'lista_productos' %}" class="text-decoration-none text-muted fw-bold">
            <i class="bi bi-arrow-left"></i> Volver al listado
        </a>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-10">
            
            <!-- Tarjeta Principal de Detalle -->
            <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
                <div class="row g-0">
                    
                    <!-- COLUMNA IZQUIERDA: Visual / Icono / Precio -->
                    <div class="col-md-5 bg-light d-flex flex-column justify-content-center align-items-center p-5 text-center position-relative">
                        
                        <!-- Badge de Categoría flotante -->
                        <div class="position-absolute top-0 start-0 m-3">
                            <span class="badge bg-warning text-dark rounded-pill fs-6 shadow-sm">
                                {{ producto.categoria }}
                            </span>
                        </div>

                        <!-- Icono Grande (Placeholder de imagen) -->
                        <div class="mb-4 text-secondary opacity-75">
                            <i class="bi bi-basket3-fill" style="font-size: 8rem;"></i>
                        </div>

                        <!-- Precio Grande -->
                        <div class="bg-white px-4 py-2 rounded-3 shadow-sm border border-1">
                            <span class="text-muted small text-uppercase fw-bold">Precio Unitario</span>
                            <h2 class="display-5 fw-bold text-dark mb-0">$ {{ producto.precio }}</h2>
                        </div>
                    </div>

                    <!-- COLUMNA DERECHA: Información Detallada -->
                    <div class="col-md-7 p-4 p-lg-5 bg-white d-flex flex-column">
                        
                        <!-- Encabezado del producto -->
                        <div class="mb-4">
                            <small class="text-primary fw-bold text-uppercase tracking-wide">
                                <i class="bi bi-tag-fill me-1"></i> {{ producto.marca }}
                            </small>
                            <h1 class="fw-bold text-dark mt-2 mb-3">{{ producto.nombre }}</h1>
                            <!-- Barra separadora decorativa -->
                            <div style="width: 50px; height: 5px; background-color: #FFC107; border-radius: 10px;"></div>
                        </div>

                        <!-- Información Técnica / Stock -->
                        <div class="vstack gap-3 mb-5">
                            
                            <!-- Código de Barras -->
                            <div class="d-flex align-items-center">
                                <div class="icon-square bg-light text-dark rounded-3 p-2 me-3">
                                    <i class="bi bi-upc-scan fs-4"></i>
                                </div>
                                <div>
                                    <h6 class="mb-0 text-muted">Código de Barras</h6>
                                    <span class="fw-bold fs-5">{{ producto.codigo_de_barras }}</span>
                                </div>
                            </div>

                            <!-- Estado del Stock -->
                            <div class="d-flex align-items-center">
                                <div class="icon-square bg-light text-dark rounded-3 p-2 me-3">
                                    <i class="bi bi-boxes fs-4"></i>
                                </div>
                                <div>
                                    <h6 class="mb-0 text-muted">Stock Actual</h6>
                                    <div class="d-flex align-items-center gap-2">
                                        <span class="fw-bold fs-5">{{ producto.stock }} unidades</span>
                                        
                                        <!-- Lógica Visual de Stock -->
                                        {% if producto.stock == 0 %}
                                            <span class="badge bg-danger">Sin Stock</span>
                                        {% elif producto.stock < 5 %}
                                            <span class="badge bg-warning text-dark">Crítico</span>
                                        {% else %}
                                            <span class="badge bg-success">Disponible</span>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Botonera de Acciones (Footer de la columna) -->
                        <div class="mt-auto d-flex gap-2">
                            <!-- Botón Editar -->
                            <a href="#" class="btn btn-primary btn-lg rounded-pill px-4 flex-grow-1">
                                <i class="bi bi-pencil-square me-2"></i> Editar
                            </a>

                            <a href="#" class="btn btn-outline-danger btn-lg rounded-pill px-4" onclick="return confirm('¿Estás seguro de eliminar este producto?');">
                                <i class="bi bi-trash"></i>
                            </a>
                        </div>

                    </div>
                </div>
            </div>
            
            <!-- Información adicional o Historial (Opcional) -->
            <div class="mt-4 text-center">
                <p class="text-muted small">
                    <i class="bi bi-info-circle me-1"></i> 
                    El stock se actualiza automáticamente con las ventas.
                </p>
            </div>

        </div>
    </div>
</div>

{% endblock %}